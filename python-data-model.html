
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="http://pybit.es/theme/stylesheet/style.min.css">
  <link rel="stylesheet" type="text/css" href="http://pybit.es/theme/stylesheet/custom.css">

  <link rel="stylesheet" type="text/css" href="http://pybit.es/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="http://pybit.es/theme/font-awesome/css/font-awesome.min.css">




    <link rel="shortcut icon" href="http://pybit.es/favicon.ico" type="image/x-icon">
    <link rel="icon" href="http://pybit.es/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Bob" />
<meta name="description" content="After last post on OOP a logical follow-up is Python's data model. We use the great Fluent Python book to code up an example of our own, showing the powerful way you can leverage this data model. You can download the notebook here." />
<meta name="keywords" content="datamodel, oop, magic, dunder, builtin, pythonic, iterator, slicing">
<meta property="og:site_name" content="PyBites"/>
<meta property="og:title" content="Python's data model by example"/>
<meta property="og:description" content="After last post on OOP a logical follow-up is Python's data model. We use the great Fluent Python book to code up an example of our own, showing the powerful way you can leverage this data model. You can download the notebook here."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://pybit.es/python-data-model.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-01-25 12:00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="http://pybit.es/author/bob.html">
<meta property="article:section" content="Concepts"/>
<meta property="article:tag" content="datamodel"/>
<meta property="article:tag" content="oop"/>
<meta property="article:tag" content="magic"/>
<meta property="article:tag" content="dunder"/>
<meta property="article:tag" content="builtin"/>
<meta property="article:tag" content="pythonic"/>
<meta property="article:tag" content="iterator"/>
<meta property="article:tag" content="slicing"/>
<meta property="og:image" content="http://pybit.es/images/featured/python-data-model.png">

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@pybites" />
<meta name="twitter:title" content="Python's data model by example" />
<meta name="twitter:description" content="After last post on OOP a logical follow-up is Python's data model. We use the great Fluent Python book to code up an example of our own, showing the powerful way you can leverage this data model. You can download the notebook here." />
<meta name="twitter:image" content="http://pybit.es/images/featured/python-data-model.png">

  <title>PyBites &ndash; Python's data model by example</title>


  <script src="//load.sumome.com/" data-sumo-site-id="4262b3df2bb8820b75b4c7e09ef53c07d4d5376a3c0c6070d2fc19815019fc50" async="async"></script>

</head>
<body>
  <aside>
    <div>
      <a href="http://pybit.es">
        <img src="http://pybit.es/theme/img/profile.png" alt="PyBites" title="PyBites">
      </a>
      <h1><a href="http://pybit.es">PyBites</a></h1>

<p>Python code challenges, tutorials and news, one bite a day</p>
      <nav>
        <ul class="list">
          <li><a href="http://pybit.es/pages/about.html">About</a></li>
          <li><a href="http://pybit.es/pages/resources.html">Resources</a></li>
          <li><a href="http://pybit.es/pages/search.html">Search</a></li>

          <li><a href="http://pybit.us14.list-manage.com/subscribe?u=822043293f280259d4b8d2a3e&id=ac7e2eb9ef" target="_blank">Newsletter</a></li>
        </ul>
      </nav>

      <ul class="social">
      </ul>
    </div>


  </aside>
  <main>


<article class="single">
  <header>
    <h1 id="python-data-model">Python's data model by example</h1>
    <p>
          Posted by <a href="http://pybit.es/author/bob.html">Bob</a> on Wed 25 January 2017 in <a href="http://pybit.es/category/concepts.html">Concepts</a>


    </p>
  </header>


  <div>
    <style type="text/css">/*!
*
* IPython notebook
*
*/.ansibold{font-weight:700}.ansiblack{}.ansired{color:#8b0000}.ansigreen{6400}.ansiyellow{color:#c4a000}.ansiblue{8b}.ansipurple{color:#9400d3}.ansicyan{color:#4682b4}.ansigray{color:gray}.ansibgblack{background-}.ansibgred{background-color:red}.ansibggreen{background-color:green}.ansibgyellow{background-color:#ff0}.ansibgblue{background-f}.ansibgpurple{background-color:#ff00ff}.ansibgcyan{background-ff}.ansibggray{background-color:gray}div.cell{border:1px solid transparent;display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;border-radius:2px;box-sizing:border-box;-moz-box-sizing:border-box;border-width:thin;border-style:solid;width:100%;padding:5px;margin:0;outline:0}div.cell.selected{border-color:#ababab}@media print{div.cell.selected{border-color:transparent}}.edit_mode div.cell.selected{border-color:green}.prompt{min-width:14ex;padding:.4em;margin:0;font-family:monospace;text-align:right;line-height:1.21429em}div.inner_cell{display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1}@-moz-document url-prefix(){div.inner_cell{overflow-x:hidden}}div.input_area{border:1px solid #cfcfcf;border-radius:2px;background:#f7f7f7;line-height:1.21429em}div.prompt:empty{padding-top:0;padding-bottom:0}div.unrecognized_cell{padding:5px 5px 5px 0;display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}div.unrecognized_cell .inner_cell{border-radius:2px;padding:5px;font-weight:700;color:red;border:1px solid #cfcfcf;background:#eaeaea}div.unrecognized_cell .inner_cell a,div.unrecognized_cell .inner_cell a:hover{color:inherit;text-decoration:none}@media (max-width:540px){.prompt{text-align:left}div.unrecognized_cell>div.prompt{display:none}}div.code_cell{}div.input{page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}@media (max-width:540px){div.input{-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}}div.input_prompt{color:navy;border-top:1px solid transparent}div.input_area>div.highlight{margin:.4em;border:none;padding:0;background-color:transparent}div.input_area>div.highlight>pre{margin:0;border:none;padding:0;background-color:transparent}.CodeMirror{line-height:1.21429em;font-size:14px;height:auto;background:0 0}.CodeMirror-scroll{overflow-y:hidden;overflow-x:auto}.CodeMirror-lines{padding:.4em}.CodeMirror-linenumber{padding:0 8px 0 4px}.CodeMirror-gutters{border-bottom-left-radius:2px;border-top-left-radius:2px}.CodeMirror pre{padding:0;border:0;border-radius:0}.highlight-base,.highlight-variable{}.highlight-variable-2{color:#1a1a1a}.highlight-variable-3{color:#333}.highlight-string{color:#BA2121}.highlight-comment{color:#408080;font-style:italic}.highlight-number{80}.highlight-atom{color:#88F}.highlight-keyword{color:green;font-weight:700}.highlight-builtin{color:green}.highlight-error{color:red}.highlight-operator{color:#A2F;font-weight:700}.highlight-meta{color:#A2F}.highlight-def{f}.highlight-string-2{color:#f50}.highlight-qualifier{color:#555}.highlight-bracket{color:#997}.highlight-tag{color:#170}.highlight-attribute{c}.highlight-header{f}.highlight-quote{90}.highlight-link{c}.cm-s-ipython span.cm-keyword{color:green;font-weight:700}.cm-s-ipython span.cm-atom{color:#88F}.cm-s-ipython span.cm-number{80}.cm-s-ipython span.cm-def{f}.cm-s-ipython span.cm-variable{}.cm-s-ipython span.cm-operator{color:#A2F;font-weight:700}.cm-s-ipython span.cm-variable-2{color:#1a1a1a}.cm-s-ipython span.cm-variable-3{color:#333}.cm-s-ipython span.cm-comment{color:#408080;font-style:italic}.cm-s-ipython span.cm-string{color:#BA2121}.cm-s-ipython span.cm-string-2{color:#f50}.cm-s-ipython span.cm-meta{color:#A2F}.cm-s-ipython span.cm-qualifier{color:#555}.cm-s-ipython span.cm-builtin{color:green}.cm-s-ipython span.cm-bracket{color:#997}.cm-s-ipython span.cm-tag{color:#170}.cm-s-ipython span.cm-attribute{c}.cm-s-ipython span.cm-header{f}.cm-s-ipython span.cm-quote{90}.cm-s-ipython span.cm-link{c}.cm-s-ipython span.cm-error{color:red}.cm-s-ipython span.cm-tab{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=')right no-repeat}div.output_wrapper{display:-webkit-box;-webkit-box-align:stretch;display:-moz-box;-moz-box-align:stretch;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch;z-index:1}div.output_scroll{height:24em;width:100%;overflow:auto;border-radius:2px;-webkit-box-shadow:inset 0 2px 8px rgba(0,0,0,.8);box-shadow:inset 0 2px 8px rgba(0,0,0,.8);display:block}div.output_collapsed{margin:0;padding:0;display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}div.out_prompt_overlay{height:100%;padding:0 .4em;position:absolute;border-radius:2px}div.out_prompt_overlay:hover{-webkit-box-shadow:inset 0 0 1px #000;box-shadow:inset 0 0 1px #000;background:rgba(240,240,240,.5)}div.output_prompt{color:#8b0000}div.output_area{padding:0;page-break-inside:avoid;display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}div.output_area .MathJax_Display{text-align:left!important}div.output_area div.output_area img,div.output_area svg{max-width:100%;height:auto}div.output_area img.unconfined,div.output_area svg.unconfined{max-width:none}.output{display:-webkit-box;-webkit-box-orient:vertical;display:-moz-box;-moz-box-orient:vertical;display:box;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}@media (max-width:540px){div.output_area{-webkit-box-orient:vertical;-moz-box-orient:vertical;box-orient:vertical;box-align:stretch;display:flex;flex-direction:column;align-items:stretch}}div.output_area pre{margin:0;padding:0;border:0;vertical-align:baseline;background-color:transparent;border-radius:0}div.output_subarea{overflow-x:auto;padding:.4em;-webkit-box-flex:1;-moz-box-flex:1;box-flex:1;flex:1;max-width:calc(100% - 14ex)}div.output_text{text-align:left;line-height:1.21429em}div.output_stderr{background:#fdd}div.output_latex{text-align:left}div.output_javascript:empty{padding:0}.js-error{color:#8b0000}div.raw_input_container{font-family:monospace;padding-top:5px}span.raw_input_prompt{}input.raw_input{font-family:inherit;font-size:inherit;color:inherit;width:auto;vertical-align:baseline;padding:0 .25em;margin:0 .25em}input.raw_input:focus{box-shadow:none}p.p-space{margin-bottom:10px}div.output_unrecognized{padding:5px;font-weight:700;color:red}div.output_unrecognized a,div.output_unrecognized a:hover{color:inherit;text-decoration:none}.rendered_html{}.rendered_html :link,.rendered_html :visited,.rendered_html h1:first-child{margin-top:.538em}.rendered_html h2:first-child{margin-top:.636em}.rendered_html h3:first-child{margin-top:.777em}.rendered_html h4:first-child,.rendered_html h5:first-child,.rendered_html h6:first-child{margin-top:1em}.rendered_html *+ol,.rendered_html *+ul{margin-top:1em}.rendered_html *+table{margin-top:1em}.rendered_html *+p{margin-top:1em}.rendered_html *+img{margin-top:1em}div.text_cell{display:-webkit-box;-webkit-box-orient:horizontal;display:-moz-box;-moz-box-orient:horizontal;display:box;box-orient:horizontal;box-align:stretch;display:flex;flex-direction:row;align-items:stretch}@media (max-width:540px){div.text_cell>div.prompt{display:none}}div.text_cell_render{outline:0;resize:none;width:inherit;border-style:none;padding:.5em .5em .5em .4em;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box}a.anchor-link:link{text-decoration:none;padding:0 20px;visibility:hidden}h1:hover .anchor-link,h2:hover .anchor-link,h3:hover .anchor-link,h4:hover .anchor-link,h5:hover .anchor-link,h6:hover .anchor-link{visibility:visible}.text_cell.rendered .input_area{display:none}.text_cell.rendered .text_cell.unrendered .text_cell_render{display:none}.cm-header-1,.cm-header-2,.cm-header-3,.cm-header-4,.cm-header-5,.cm-header-6{font-weight:700;font-family:"Helvetica Neue",Helvetica,Arial,sans-serif}.cm-header-1{font-size:185.7%}.cm-header-2{font-size:157.1%}.cm-header-3{font-size:128.6%}.cm-header-4{font-size:110%}.cm-header-5,.cm-header-6{font-size:100%;font-style:italic}</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After <a href="http://pybit.es/oop-primer.html">last post on OOP</a> a logical follow-up is Python's data model. We use the great <a href="https://www.amazon.com/Fluent-Python-Concise-Effective-Programming/dp/1491946008">Fluent Python book</a> to code up an example of our own, showing the powerful way you can leverage this data model. You can download the notebook <a href="https://github.com/pybites/pybites.github.io-src/blob/master/content/data_model.ipynb">here</a>.</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p>One of the best qualities of Python is its consistency. After working with Python for a while, you are able to start making informed, correct guesses about features that are new to you.</p>
<p>However, if you learned another object-oriented language before Python, you may have found it strange to use len(collection) instead of collection.len(). This apparent oddity is the tip of an iceberg that, when properly understood, is the key to everything we call Pythonic. The iceberg is called the Python data model, and it describes the API that you can use to make your own objects play well with the most idiomatic language features. - <a href="https://www.amazon.com/Fluent-Python-Concise-Effective-Programming/dp/1491946008">Fluent Python</a></p>
</blockquote>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># for simplicity mock up some tweets</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">namedtuple</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="n">Tweet</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s">'Tweet'</span><span class="p">,</span> <span class="s">'time text likes'</span><span class="p">)</span>

<span class="n">tweets</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">Tweet</span><span class="p">(</span><span class="s">'2017-01-25 08:45:00'</span><span class="p">,</span> <span class="s">'Teaching Python today, feels great'</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
    <span class="n">Tweet</span><span class="p">(</span><span class="s">'2017-01-25 09:45:00'</span><span class="p">,</span> <span class="s">'Writing a post on the Python data model'</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
    <span class="n">Tweet</span><span class="p">(</span><span class="s">'2017-01-25 07:45:00'</span><span class="p">,</span> <span class="s">'from __future__ import braces ... not a chance'</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
    <span class="n">Tweet</span><span class="p">(</span><span class="s">'2017-01-25 10:45:00'</span><span class="p">,</span> <span class="s">'Doing code challenge 03, learning a lot'</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">Tweet</span><span class="p">(</span><span class="s">'2017-01-25 12:45:00'</span><span class="p">,</span> <span class="s">'Done with code challenge 03'</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tweets</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>(Tweet(time=&apos;2017-01-25 08:45:00&apos;, text=&apos;Teaching Python today, feels great&apos;, likes=3), Tweet(time=&apos;2017-01-25 09:45:00&apos;, text=&apos;Writing a post on the Python data model&apos;, likes=2), Tweet(time=&apos;2017-01-25 07:45:00&apos;, text=&apos;from __future__ import braces ... not a chance&apos;, likes=10), Tweet(time=&apos;2017-01-25 10:45:00&apos;, text=&apos;Doing code challenge 03, learning a lot&apos;, likes=5), Tweet(time=&apos;2017-01-25 12:45:00&apos;, text=&apos;Done with code challenge 03&apos;, likes=1))
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [2]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># lets make twitter handle a bit more sophisticated, we are going to work with a parent-child relation for this example</span>

<span class="k">class</span> <span class="nc">Handle</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="n">shared_handle</span><span class="o">=</span><span class="k">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shared_handle</span> <span class="o">=</span> <span class="n">shared_handle</span>
    
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">shared</span> <span class="o">=</span> <span class="s">''</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">shared_handle</span> <span class="ow">is</span> <span class="k">None</span><span class="p">:</span>
            <span class="n">shared</span> <span class="o">=</span> <span class="s">''</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">shared</span> <span class="o">=</span> <span class="s">' (shared handle: {})'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shared_handle</span><span class="p">)</span>
        <span class="k">return</span> <span class="s">'{}{}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="n">shared</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># a TwitterUser has a handle name and a bunch of tweets, note the two dunder methods after the constructor ...</span>

<span class="k">class</span> <span class="nc">TwitterUser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="n">tweets</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tweets</span> <span class="o">=</span> <span class="n">tweets</span>
        
    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_tweets</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tweets</span><span class="p">[</span><span class="n">position</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="n">bob</span> <span class="o">=</span> <span class="n">TwitterUser</span><span class="p">(</span>
    <span class="n">Handle</span><span class="p">(</span><span class="s">'bbelderbos'</span><span class="p">,</span> <span class="n">shared_handle</span><span class="o">=</span><span class="s">'pybites'</span><span class="p">),</span> <span class="n">tweets</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># implementing len we can call it on the object like this: </span>

<span class="nb">len</span><span class="p">(</span><span class="n">bob</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[5]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>5</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># implementing getitem we can get tweets by index</span>

<span class="n">bob</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[6]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>Tweet(time=&apos;2017-01-25 08:45:00&apos;, text=&apos;Teaching Python today, feels great&apos;, likes=3)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [7]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># or with a slice</span>

<span class="n">bob</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[7]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>(Tweet(time=&apos;2017-01-25 10:45:00&apos;, text=&apos;Doing code challenge 03, learning a lot&apos;, likes=5),
 Tweet(time=&apos;2017-01-25 12:45:00&apos;, text=&apos;Done with code challenge 03&apos;, likes=1))</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [8]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># wow implementing __getitem__ bob turns into an iterable!</span>

<span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="n">bob</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tw</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Tweet(time=&apos;2017-01-25 08:45:00&apos;, text=&apos;Teaching Python today, feels great&apos;, likes=3)
Tweet(time=&apos;2017-01-25 09:45:00&apos;, text=&apos;Writing a post on the Python data model&apos;, likes=2)
Tweet(time=&apos;2017-01-25 07:45:00&apos;, text=&apos;from __future__ import braces ... not a chance&apos;, likes=10)
Tweet(time=&apos;2017-01-25 10:45:00&apos;, text=&apos;Doing code challenge 03, learning a lot&apos;, likes=5)
Tweet(time=&apos;2017-01-25 12:45:00&apos;, text=&apos;Done with code challenge 03&apos;, likes=1)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># and can be passed as a sequence object to other builtins</span>

<span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">bob</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt output_prompt">Out[9]:</div>
<div class="output_text output_subarea output_execute_result">
<pre>Tweet(time=&apos;2017-01-25 07:45:00&apos;, text=&apos;from __future__ import braces ... not a chance&apos;, likes=10)</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># or give it to sorted so we can use its key arg to sort by most likes</span>
<span class="c"># easter eggs are well received :)</span>

<span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">bob</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">likes</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="k">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tw</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Tweet(time=&apos;2017-01-25 07:45:00&apos;, text=&apos;from __future__ import braces ... not a chance&apos;, likes=10)
Tweet(time=&apos;2017-01-25 10:45:00&apos;, text=&apos;Doing code challenge 03, learning a lot&apos;, likes=5)
Tweet(time=&apos;2017-01-25 08:45:00&apos;, text=&apos;Teaching Python today, feels great&apos;, likes=3)
Tweet(time=&apos;2017-01-25 09:45:00&apos;, text=&apos;Writing a post on the Python data model&apos;, likes=2)
Tweet(time=&apos;2017-01-25 12:45:00&apos;, text=&apos;Done with code challenge 03&apos;, likes=1)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id=" Conclusion"> Conclusion<a class="anchor-link" href="# Conclusion">¶</a></h3><p>A real eye-opener reading Fluent Python: by only implementing __len__() and __getitem__() we got nice features like slicing and iteration out of the box!</p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="But-there-is-more-...">But there is more ...<a class="anchor-link" href="#But-there-is-more-...">¶</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [11]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># making another user</span>
<span class="n">tweets2</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">Tweet</span><span class="p">(</span><span class="s">'2017-01-25 10:46:00'</span><span class="p">,</span> <span class="s">'Writing a blog post on a cool new module I discovered'</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">Tweet</span><span class="p">(</span><span class="s">'2017-01-25 12:46:00'</span><span class="p">,</span> <span class="s">'Learning some Python today, feeling great'</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">julian</span> <span class="o">=</span> <span class="n">TwitterUser</span><span class="p">(</span>
    <span class="n">Handle</span><span class="p">(</span><span class="s">'techmoneykids'</span><span class="p">,</span> <span class="n">shared_handle</span><span class="o">=</span><span class="s">'pybites'</span><span class="p">),</span> <span class="n">tweets2</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [12]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># I want to be able to merge tweets, just as we can do with lists: [1] + [2,3] = [1,2,3]</span>
<span class="c"># however this does not work out of the box</span>

<span class="n">bob</span> <span class="o">+</span> <span class="n">julian</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">TypeError</span>                                 Traceback (most recent call last)
<span class="ansigreen"><ipython-input-12-08fc7fe18fd0></span> in <span class="ansicyan"><module></span><span class="ansiblue">()</span>
<span class="ansigreen">      2</span> <span class="ansired"># however this does not work out of the box</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">      3</span> <span class="ansiblue"></span>
<span class="ansigreen">----> 4</span><span class="ansired"> </span>bob <span class="ansiblue">+</span> julian<span class="ansiblue"></span>

<span class="ansired">TypeError</span>: unsupported operand type(s) for +: &apos;TwitterUser&apos; and &apos;TwitterUser&apos;</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># we can make this work implementing __add__()</span>

<span class="k">class</span> <span class="nc">IncompatibleHandle</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">TwitterUser</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="n">tweets</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle</span> <span class="o">=</span> <span class="n">handle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tweets</span> <span class="o">=</span> <span class="n">tweets</span>  <span class="c"># making interfacce public as we need it in __add__</span>
        
    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tweets</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tweets</span><span class="p">[</span><span class="n">position</span><span class="p">]</span>
    
    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="o">.</span><span class="n">shared_handle</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">handle</span><span class="o">.</span><span class="n">shared_handle</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">IncompatibleHandle</span><span class="p">(</span><span class="s">'Not the same shared handle, cannot merge tweets'</span><span class="p">)</span>
        <span class="n">all_tweets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tweets</span> <span class="o">+</span> <span class="n">other</span><span class="o">.</span><span class="n">tweets</span>
        <span class="k">return</span> <span class="n">TwitterUser</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="o">.</span><span class="n">shared_handle</span><span class="p">,</span> <span class="n">all_tweets</span><span class="p">)</span>
    
    <span class="c"># adding object string representation methods</span>
    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'TwitterUser(%r, %r)'</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tweets</span><span class="p">)</span>
    
    <span class="c"># difference between the repr and str: </span>
    <span class="c"># http://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s">'{} => likes: {} for {} tweets = {:.1f} avg'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_likes</span><span class="p">(),</span> 
            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">avg_likes</span><span class="p">()</span>
        <span class="p">)</span>
    
    <span class="c"># adding some public methods to show later on that the merged object behaves just as its parts</span>
    <span class="k">def</span> <span class="nf">total_likes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">tw</span><span class="o">.</span><span class="n">likes</span> <span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tweets</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">avg_likes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_likes</span><span class="p">()</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># need to create bob, julian again using the rewritten class </span>

<span class="n">bob</span> <span class="o">=</span> <span class="n">TwitterUser</span><span class="p">(</span>
    <span class="n">Handle</span><span class="p">(</span><span class="s">'bbelderbos'</span><span class="p">,</span> <span class="n">shared_handle</span><span class="o">=</span><span class="s">'pybites'</span><span class="p">),</span> <span class="n">tweets</span>
<span class="p">)</span>
<span class="n">julian</span> <span class="o">=</span> <span class="n">TwitterUser</span><span class="p">(</span>
    <span class="n">Handle</span><span class="p">(</span><span class="s">'techmoneykids'</span><span class="p">,</span> <span class="n">shared_handle</span><span class="o">=</span><span class="s">'pybites'</span><span class="p">),</span> <span class="n">tweets2</span>
<span class="p">)</span>
<span class="c"># lets also add a not-compatible handle</span>
<span class="n">stranger</span> <span class="o">=</span> <span class="n">TwitterUser</span><span class="p">(</span>
    <span class="n">Handle</span><span class="p">(</span><span class="s">'someblogger'</span><span class="p">,</span> <span class="n">shared_handle</span><span class="o">=</span><span class="s">'stranger'</span><span class="p">),</span> <span class="n">tweets2</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># now it works, thanks to __add__ </span>

<span class="n">pybites</span> <span class="o">=</span> <span class="n">bob</span> <span class="o">+</span> <span class="n">julian</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># our tweets are merged, glad to have Julian most liked tweet now ;)</span>

<span class="k">for</span> <span class="n">tw</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">pybites</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">likes</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="k">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">tw</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Tweet(time=&apos;2017-01-25 12:46:00&apos;, text=&apos;Learning some Python today, feeling great&apos;, likes=15)
Tweet(time=&apos;2017-01-25 07:45:00&apos;, text=&apos;from __future__ import braces ... not a chance&apos;, likes=10)
Tweet(time=&apos;2017-01-25 10:45:00&apos;, text=&apos;Doing code challenge 03, learning a lot&apos;, likes=5)
Tweet(time=&apos;2017-01-25 10:46:00&apos;, text=&apos;Writing a blog post on a cool new module I discovered&apos;, likes=5)
Tweet(time=&apos;2017-01-25 08:45:00&apos;, text=&apos;Teaching Python today, feels great&apos;, likes=3)
Tweet(time=&apos;2017-01-25 09:45:00&apos;, text=&apos;Writing a post on the Python data model&apos;, likes=2)
Tweet(time=&apos;2017-01-25 12:45:00&apos;, text=&apos;Done with code challenge 03&apos;, likes=1)
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># but stranger is not part of pybites, so custom exception is raised (as implemented in __add__)</span>

<span class="n">bob</span> <span class="o">+</span> <span class="n">stranger</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansired">---------------------------------------------------------------------------</span>
<span class="ansired">IncompatibleHandle</span>                        Traceback (most recent call last)
<span class="ansigreen"><ipython-input-17-9ee66cd5c34d></span> in <span class="ansicyan"><module></span><span class="ansiblue">()</span>
<span class="ansigreen">      1</span> <span class="ansired"># but stranger is not part of pybites, so custom exception is raised (as implemented in __add__)</span><span class="ansiblue"></span><span class="ansiblue"></span>
<span class="ansigreen">      2</span> <span class="ansiblue"></span>
<span class="ansigreen">----> 3</span><span class="ansired"> </span>bob <span class="ansiblue">+</span> stranger<span class="ansiblue"></span>

<span class="ansigreen"><ipython-input-13-d86635054781></span> in <span class="ansicyan">__add__</span><span class="ansiblue">(self, other)</span>
<span class="ansigreen">     18</span>     <span class="ansigreen">def</span> __add__<span class="ansiblue">(</span>self<span class="ansiblue">,</span> other<span class="ansiblue">)</span><span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">     19</span>         <span class="ansigreen">if</span> self<span class="ansiblue">.</span>handle<span class="ansiblue">.</span>shared_handle <span class="ansiblue">!=</span> other<span class="ansiblue">.</span>handle<span class="ansiblue">.</span>shared_handle<span class="ansiblue">:</span><span class="ansiblue"></span>
<span class="ansigreen">---> 20</span><span class="ansired">             </span><span class="ansigreen">raise</span> IncompatibleHandle<span class="ansiblue">(</span><span class="ansiblue">&apos;Not the same shared handle, cannot merge tweets&apos;</span><span class="ansiblue">)</span><span class="ansiblue"></span>
<span class="ansigreen">     21</span>         all_tweets <span class="ansiblue">=</span> self<span class="ansiblue">.</span>tweets <span class="ansiblue">+</span> other<span class="ansiblue">.</span>tweets<span class="ansiblue"></span>
<span class="ansigreen">     22</span>         <span class="ansigreen">return</span> TwitterUser<span class="ansiblue">(</span>self<span class="ansiblue">.</span>handle<span class="ansiblue">.</span>shared_handle<span class="ansiblue">,</span> all_tweets<span class="ansiblue">)</span><span class="ansiblue"></span>

<span class="ansired">IncompatibleHandle</span>: Not the same shared handle, cannot merge tweets</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># print on object calls the underlying __str__ which we used to print some stats</span>
<span class="c"># also notes it embeds the __str__ of the Handle object</span>

<span class="nb">print</span><span class="p">(</span><span class="n">bob</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>bbelderbos (shared handle: pybites) => likes: 21 for 5 tweets = 4.2 avg
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># Julian is definitely more influential than me :) </span>

<span class="nb">print</span><span class="p">(</span><span class="n">julian</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>techmoneykids (shared handle: pybites) => likes: 20 for 2 tweets = 10.0 avg
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
<div class="input_area">
<div class=" highlight hl-ipython3"><pre><span class="c"># ... improving the average</span>

<span class="nb">print</span><span class="p">(</span><span class="n">pybites</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>pybites => likes: 41 for 7 tweets = 5.9 avg
</pre>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>

  </div>
  <div class="tag-cloud">
    <p>
      <a href="http://pybit.es/tag/datamodel.html">datamodel</a>
      <a href="http://pybit.es/tag/oop.html">oop</a>
      <a href="http://pybit.es/tag/magic.html">magic</a>
      <a href="http://pybit.es/tag/dunder.html">dunder</a>
      <a href="http://pybit.es/tag/builtin.html">builtin</a>
      <a href="http://pybit.es/tag/pythonic.html">pythonic</a>
      <a href="http://pybit.es/tag/iterator.html">iterator</a>
      <a href="http://pybit.es/tag/slicing.html">slicing</a>
    </p>
  </div>

  <div class="center social-share">
    <p>    Like this article? Share it with your friends!
</p>
    <div class="addthis_native_toolbox"></div>
    <div class="addthis_sharing_toolbox"></div>
  </div>



<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'http-pybit-es';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
</article>

    <footer>
<p>&copy; pybites </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-89294245-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5859c6a67eb6254d" async="async"></script>


<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " PyBites ",
  "url" : "http://pybit.es",
  "image": "http://pybit.es/theme/img/profile.png",
  "description": "Python code challenges, tutorials and news, one bite a day"
}
</script>
</body>
</html>